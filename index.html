<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>
    JL STUDIO
  </title>
  <meta name="JL" content="" />
  <link rel="stylesheet" href="./css/styles.css" />
  <link rel="stylesheet" href="./css/nav.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/locomotive-scroll@3.5.4/dist/locomotive-scroll.css" />
  <script src="https://unpkg.co/gsap/dist/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.0.2/TweenMax.min.js"></script>
</head>

<body>
  <div class="logo">
    <div id="cursor"></div>
    <button class="hover-link" area-label="Reservation" cursor-type="button">
      <span area-hidden="true">
        <span>Reservation<span>Reservation</span></span>
      </span>
    </button>
  </div>

  <!-- toggle btn -->
  <div class="btn" id="toggle-btn">
    <div class="btn-outline btn-outline-1"></div>
    <div class="btn-outline btn-outline-2"></div>
    <div id="hamburger">
      <span></span>
    </div>
  </div>

  <!-- svg overlay=> 用SVG繪製的背景覆蓋層 -->
  <div class="overlay">
    <svg viewBox="0 0 350 1000">
      <path d="M0 2S175 1 500 1s500 1 500 1V0H0Z"></path>
    </svg>
  </div>

  <!-- menu items -->
  <div class="menu">
    <div class="primary-menu">
      <div class="menu-container">
        <div class="wrapper">
          <div class="menu-item">
            <a href="./pages/tasting menu.html"><span>1.</span>Tasting Menu</a>
            <div class="menu-item-revealer"></div>
          </div>
          <div class="menu-item">
            <a href="./pages/discovery menu.html"><span>2.</span>Discovery Menu</a>
            <div class="menu-item-revealer"></div>
          </div>
          <div class="menu-item">
            <a href="./index.html"><span>3.</span>About</a>
            <div class="menu-item-revealer"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- menu-->
    <div id="cursor2"></div>
    <button class="hover-link" area-label="discovermenu" cursor-type="button">
      <span area-hidden="true">
        <span>tasting<span>tasting</span></span>
        <span>menu<span>menu</span></span>
      </span>
    </button>
  </div>

  <!-- main-bg-->
  </div>
  <div class="main-bg video">
    <video autoplay loop muted>
      <source src="./pages/abstract-silhouette-shadow-white_AdobeExpress.mp4">
    </video>
  </div>
  <div class="container" data-scroll-container>

    <div class="site-content">
      <!-- hero -->
      <section class="hero">
        <div class="hero-header">
          <div class="hero-header-wrapper">
            <h1>JL</h1>
            <div class="about-h1-revealer"></div>
          </div>
          <div class="hero-header-wrapper">
            <h1>STUDIO</h1>
            <div class="about-h1-revealer"></div>
          </div>
        </div>
        <div class="hero-img" data-scroll data-scroll-speed="3">
          <div class="hero-img-wrap">
            <img src="./pages/intro.jpg" alt="" />
          </div>
        </div>
      </section>
      <!-- sub-hero -->
      <section class="smooth-scroll">
        <div class="sub-hero">
          <h2>At JL Studio,<br>that I would like to share with you the flavors that belong to me, filled with love,
            memories,and roots.</h2>
        </div>
      </section>
      <!-- photo-->
      <section class="photo-container">
        <div class="container-items">
          <div class="container-img-wrap">
            <div class="container-img"></div>
          </div>
          <div class="item">
            <a href="#" class="container-item" data-img="./pages/IMG_g1.jpg">
              <h3>root</h3>
            </a>
          </div>
          <div class="item">
            <a href="#" class="container-item" data-img="./pages/IMG_g2.jpg">
              <h3>flavors</h3>
            </a>
          </div>
          <div class="item">
            <a href="#" class="container-item" data-img="./pages/IMG_g3.jpg">
              <h3>feel</h3>
            </a>
          </div>
          <div class="item">
            <a href="#" class="container-item" data-img="./pages/IMG_g4.jpg">
              <h3>skill</h3>
            </a>
          </div>
          <div class="item">
            <a href="#" class="container-item" data-img="./pages/IMG_g5.jpg">
              <h3>re-</h3>
            </a>
          </div>
        </div>
      </section>

      <!--video-->
      <section class="video-animation">
        <img class="sauce" src="./pages/sauce.png" data-scroll data-scroll-speed="3">
        <div class="video-container" id="video-container">
          <video class="brunt-video" src="./pages/brunt.mp4" loop muted autoplay></video>
        </div>
      </section>


      <!-- chef-hero -->
      <section class="smooth-scroll">
        <div class="chef-hero" data-scroll data-scroll-speed="3">
          <p>Chef Jimmy Lim Tyan Yaw, never bound by convention. Experienced different food and cultures abroad. Finally
            immersed himself in his adopted homeland, learning the language and adapted his heritage to the land.
            Through JL Studio guests can dive deep into his interesting multi-course tasting menu featuring the amazing
            produce of Taiwan and the traditional techniques and favor profiles of Singaporean cuisine, reinterpreting
            it into a modern sensibility for the contemporary palate.</p>
          <img class="herb" src="./pages/herb.png" data-scroll data-scroll-speed="3">
        </div>
      </section>

      <!-- awards-->
      <section class="awards">
        <h4>Awards</h4>
        <div class="awards-container">
          <div class="awards-row">
            <img src="./pages/LOGO_asias50.png" data-scroll data-scroll-speed="3">
            <img src="./pages/LOGO_michelin.png" data-scroll data-scroll-speed="3">
            <img src="./pages/LOGO_oad.png" data-scroll data-scroll-speed="3">
            <img src="./pages/LOGO_secret.png" data-scroll data-scroll-speed="3">
          </div>
        </div>
      </section>

      <!-- news-->
      <section class="awards">
        <h4>Latest news</h4>
        <div class="slider">
          <div class="slider-wrapper">
            <div class="slider-item">
              <figure>
                <img src="./pages/showreel img1.jpg" alt="" />
              </figure>
            </div>
            <div class="slider-item">
              <figure>
                <img src="./pages/showreel img2.jpg" alt="" />
              </figure>
            </div>
            <div class="slider-item">
              <figure>
                <img src="./pages/showreel img3.jpg" alt="" />
              </figure>
            </div>
            <div class="slider-item">
              <figure>
                <img src="./pages/showreel img4.jpg" alt="" />
              </figure>
            </div>
            <div class="slider-item">
              <figure>
                <img src="./pages/showreel img5.jpg" alt="" />
              </figure>
            </div>
            <div class="slider-item">
              <figure>
                <img src="./pages/showreel img6.jpg" alt="" />
              </figure>
            </div>
          </div>
          <div class="slider-progress">
            <div class="slider-progress-bar"></div>
          </div>
        </div>
        
      </section>

      <!-- subscription -->
      <section class="subscription">
        <h4 data-scroll data-scroll-speed="2">Subscription</h4>
        <p data-scroll >Sign up for JL studio newsletter</p>
        <div data-scroll class="subscription__form">
          <input type="text" placeholder="Enter your email address" />
          <button>submit</button>
        </div>
      </section>

</body>
<script src="https://unpkg.co/gsap@3/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/locomotive-scroll@3.5.4/dist/locomotive-scroll.min.js"></script>
<script src="https://unpkg.com/gsap@3/dist/ScrollTrigger.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.3.1/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/CSSRulePlugin.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/locomotive-scroll@3.5.4/dist/locomotive-scroll.min.js"></script>
<script src="../js/script.js"></script>

<script>


  //滑鼠移動事件
  let cursor = document.getElementById("cursor");
  const onMouseMove = (event) => {
  //頁面座標=>讓光標隨著鼠標移動
    cursor.style.left = event.pageX + "px";
    cursor.style.top = event.pageY + "px";
  

    if (event.target.hasAttribute("cursor-type")) {
      let cursorSize = event.target.getAttribute("cursor-type");
      cursor.classList.add(cursorSize);
    } else {
      cursor.classList = "";
    }
  };

  document.addEventListener("mousemove", onMouseMove);

  window.addEventListener("load", () => {
    const scroll = new LocomotiveScroll({
      el: document.querySelector("[data-scroll-container]"),
      smooth: true,
      multiplier: 0.75,
      scrollFromAnywhere: true,
    });

    setTimeout(() => {
      scroll.update();
    }, 3000);
  });

  gsap.to("h1", 2, {
    // delay: 0.25,
    top: "-40px",
    ease: "power4.inOut",
    stagger: {
      amount: 0.125,
    },
      //stagger=>控制動畫間隔時間

  });
  gsap.to(".hero .hero-img", 0.05, { opacity: 1 });

  gsap.from(".hero .hero-img", 1, {
    delay: 1,
    clipPath: "inset(0 100% 0 0)",
    ease: "power4.inOut"
  });

  gsap.from(".play", 2, {
    delay: 2,
    scale: 0,
    ease: "power4.inOut",
  });


  // photo
  const allcontainer = gsap.utils.toArray(".container-item"); //選取多個item
  const venueImageWrap = document.querySelector(".container-img-wrap"); 
  const venueImage = document.querySelector(".container-img");

  function initcontainer() {
    allcontainer.forEach((link) => {
      link.addEventListener("mouseenter", venueHover);
      link.addEventListener("mouseleave", venueHover);
      link.addEventListener("mousemove", moveVenueImage);
    });
  }

  function moveVenueImage(e) {
    let xpos = e.clientX;
    let ypos = e.clientY;
    const tl = gsap.timeline();
    tl.to(venueImageWrap, {
      x: xpos,
      y: ypos,
    });
  }

  //鼠標移開的話，隱藏照片
  function venueHover(e) {
    if (e.type === "mouseenter") {
      const targetImage = e.target.dataset.img;

      const tl = gsap.timeline();
      tl.set(venueImage, {
        backgroundImage: `url(${targetImage})`,
      }).to(venueImageWrap, {
        duration: 0.5,
        autoAlpha: 1,
      });
    } else if (e.type === "mouseleave") {
      const tl = gsap.timeline();
      tl.to(venueImageWrap, {
        duration: 0.5,
        autoAlpha: 0,
      });
    }
  }

  function init() {
    initcontainer();
  }

  window.addEventListener("load", function () {
    init();
  });

  // news
  const lerp = (f0, f1, t) => (1 - t) * f0 + t * f1;
  const clamp = (val, min, max) => Math.max(min, Math.min(val, max));

  class DragScroll {
    constructor(obj) {
      this.el = document.querySelector(obj.el);
      this.wrap = this.el.querySelector(obj.wrap);
      this.items = this.el.querySelectorAll(obj.item);
      this.bar = this.el.querySelector(obj.bar);
      this.init();
    }

    init() {
      this.progress = 0;
      this.speed = 0;
      this.oldX = 0;
      this.x = 0;
      this.playrate = 0;

      this.bindings();
      this.events();
      this.calculate();
      this.raf();
    }

    bindings() {
      [
        "events",
        "calculate",
        "raf",
        "handleWheel",
        "move",
        "raf",
        "handleTouchStart",
        "handleTouchMove",
        "handleTouchEnd",
      ].forEach((method) => {
        this[method] = this[method].bind(this);
      });
    }

    calculate() {
      this.progress = 0;
      this.wrapWidth = this.items[0].clientWidth * this.items.length;
      this.wrap.style.width = `${this.wrapWidth}px`;
      this.maxScroll = this.wrapWidth - this.el.clientWidth;
    }

    handleWheel(e) {
      this.progress += e.deltaY;
      this.move();
    }

    handleTouchStart(e) {
      e.preventDefault();
      this.dragging = true;
      this.startX = e.clientX || e.touches[0].clientX;
      this.el.classList.add("dragging");
    }

    handleTouchMove(e) {
      if (!this.dragging) return false;
      const x = e.clientX || e.touches[0].clientX;
      this.progress += (this.startX - x) * 2.5;
      this.startX = x;
      this.move();
    }

    handleTouchEnd() {
      this.dragging = false;
      this.el.classList.remove("dragging");
    }

    move() {
      this.progress = clamp(this.progress, 0, this.maxScroll);
    }

    events() {
      window.addEventListener("resize", this.calculate);
      window.addEventListener("wheel", this.handleWheel);

      this.el.addEventListener("touchstart", this.handleTouchStart);
      window.addEventListener("touchmove", this.handleTouchMove);
      window.addEventListener("touchend", this.handleTouchEnd);

      window.addEventListener("mousedown", this.handleTouchStart);
      window.addEventListener("mousemove", this.handleTouchMove);
      window.addEventListener("mouseup", this.handleTouchEnd);
      document.body.addEventListener("mouseleave", this.handleTouchEnd);
    }

    raf() {
      this.x = lerp(this.x, this.progress, 0.1);
      this.playrate = this.x / this.maxScroll;

      this.wrap.style.transform = `translateX(${-this.x}px)`;
      this.bar.style.transform = `scaleX(${0.18 + this.playrate * 0.82})`;

      this.speed = Math.min(100, this.oldX - this.x);
      this.oldX = this.x;

      this.scale = lerp(this.scale, this.speed, 0.1);
      this.items.forEach((item) => {
        item.style.transform = `scale(${1 - Math.abs(this.speed) * 0.005})`;
        item.querySelector("img").style.transform = `scaleX(${1 + Math.abs(this.speed) * 0.004
          })`;
      });
    }
  }

  const scroll = new DragScroll({
    el: ".slider",
    wrap: ".slider-wrapper",
    item: ".slider-item",
    bar: ".slider-progress-bar",
  });

  const animateScroll = () => {
    requestAnimationFrame(animateScroll);
    scroll.raf();
  };
  animateScroll();


</script>


</script>

</html>
